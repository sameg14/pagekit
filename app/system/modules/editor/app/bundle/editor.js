var Editor=function(e){function t(o){if(i[o])return i[o].exports;var s=i[o]={exports:{},id:o,loaded:!1};return e[o].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){var o,s;o=i(7),s=i(14),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options:e.exports).template=s)},function(e,t){e.exports={created:function(){var e=this,t=$(this.$parent.$els.editor),i=t.parent();i.addClass("pk-editor"),this.$asset({css:["app/assets/codemirror/hint.css","app/assets/codemirror/codemirror.css"],js:["app/assets/codemirror/codemirror.js"]}).then(function(){this.editor=CodeMirror.fromTextArea(this.$parent.$els.editor,_.extend({mode:"htmlmixed",dragDrop:!1,autoCloseTags:!0,matchTags:!0,autoCloseBrackets:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!1,tabSize:4},this.$parent.options)),i.attr("data-uk-check-display","true").on("display.uk.check",function(t){e.editor.refresh()}),this.editor.on("change",function(){e.editor.save(),t.trigger("input")}),this.$watch("$parent.value",function(e){e!=this.editor.getValue()&&this.editor.setValue(e)}),this.$emit("ready")})}}},function(e,t){e.exports={created:function(){this.$parent.$set("height",this.$parent.height+47),this.$asset({css:["app/assets/codemirror/hint.css","app/assets/codemirror/codemirror.css"],js:["app/assets/codemirror/codemirror.js","app/assets/marked/marked.js","app/assets/uikit/js/components/htmleditor.min.js"]}).then(function(){var e=this.$parent.editor=UIkit.htmleditor(this.$parent.$els.editor,_.extend({marked:window.marked,CodeMirror:window.CodeMirror},this.$parent.options));e.element.on("htmleditor-save",function(e,t){if(t.element[0].form){var i=document.createEvent("HTMLEvents");i.initEvent("submit",!0,!1),t.element[0].form.dispatchEvent(i)}}),this.$watch("$parent.value",function(t){t!=e.editor.getValue()&&e.editor.setValue(t)}),this.$watch("$parent.options.markdown",function(t){e.trigger(t?"enableMarkdown":"disableMarkdown")},{immediate:!0}),this.$emit("ready")})}}},function(e,t,i){var o=Vue.extend(i(21));e.exports={plugin:!0,created:function(){var e=this,t=this.$parent.editor;t&&t.htmleditor&&(this.images=[],t.off("action.image").on("action.image",function(t,i){e.openModal(_.find(e.images,function(e){return e.inRange(i.getCursor())}))}).on("render",function(){var i="gfm"!=t.getMode()?/<img(.+?)>/gi:/(?:<img(.+?)>|!(?:\[([^\n\]]*)])(?:\(([^\n\]]*?)\))?)/gi;e.images=t.replaceInPreview(i,e.replaceInPreview)}).on("renderLate",function(){for(;e.$children.length;)e.$children[0].$destroy();Vue.nextTick(function(){t.preview.find("image-preview").each(function(){e.$compile(this)})})}))},methods:{openModal:function(e){var t=this.$parent.editor,i=t.editor.getCursor();e||(e={replace:function(e){t.editor.replaceRange(e,i)}}),new o({parent:this,data:{image:e}}).$mount().$appendTo("body").$on("select",function(e){e.replace(this.$interpolate("html"==(e.tag||t.getCursorMode())?'<img src="{{ image.src }}" alt="{{ image.alt }}">':"![{{ image.alt }}]({{ image.src }})"))})},replaceInPreview:function(e,t){return"<"==e.matches[0][0]?(e.src=e.matches[0].match(/src="(.*?)"/)[1],e.alt=e.matches[0].match(/alt="(.*?)"/)[1],e.tag="html"):(e.src=e.matches[3],e.alt=e.matches[2],e.tag="gfm"),'<image-preview index="'+t+'"></image-preview>'}},components:{"image-preview":i(22)}}},function(e,t,i){var o=Vue.extend(i(23));e.exports={plugin:!0,created:function(){var e=this,t=this.$parent.editor;t&&t.htmleditor&&(this.links=[],t.off("action.link").on("action.link",function(t,i){e.openModal(_.find(e.links,function(e){return e.inRange(i.getCursor())}))}).on("render",function(){var i="gfm"!=t.getMode()?/<a(?:.+?)>(?:[^<]*)<\/a>/gi:/<a(?:.+?)>(?:[^<]*)<\/a>|(?:\[([^\n\]]*)\])(?:\(([^\n\]]*)\))?/gi;e.links=t.replaceInPreview(i,e.replaceInPreview)}).on("renderLate",function(){for(;e.$children.length;)e.$children[0].$destroy();Vue.nextTick(function(){t.preview.find("link-preview").each(function(){e.$compile(this)})})}))},methods:{openModal:function(e){var t=this.$parent.editor,i=t.editor.getCursor();e||(e={replace:function(e){t.editor.replaceRange(e,i)}}),new o({parent:this,data:{link:e}}).$mount().$appendTo("body").$on("select",function(e){e.replace(this.$interpolate("html"==(e.tag||t.getCursorMode())?e.outerHTML?e.outerHTML:'<a href="{{ link.link }}">{{ link.txt }}</a>':"[{{ link.txt }}]({{ link.link }})"))})},replaceInPreview:function(e,t){if("<"==e.matches[0][0]){var i=$(e.matches[0]);e.link=i.attr("href"),e.txt=i.html(),e["class"]=i.attr("class")||"",e.outerHTML=i.attr("href","{{ link.link }}").text("{{ link.txt }}")[0].outerHTML}else{if("!"==e.matches[e.matches.length-1][e.matches[e.matches.length-2]-1])return!1;e.link=e.matches[2],e.txt=e.matches[1],e["class"]=""}return'<link-preview index="'+t+'"></link-preview>'}},components:{"link-preview":i(24)}}},function(e,t){e.exports={plugin:!0,created:function(){var e=this.editor;e&&e.htmleditor&&e.element.on("renderLate",function(){e.replaceInPreview(/src=["'](.+?)["']/gi,function(e){var t=e.matches[0];return e.matches[1].match(/^(\/|http:|https:|ftp:)/i)||(t=t.replace(e.matches[1],Vue.url(e.matches[1],!0))),t})})}}},function(e,t,i){var o=Vue.extend(i(25));e.exports={plugin:!0,created:function(){var e=this,t=this.$parent.editor;t&&t.htmleditor&&(this.videos=[],t.addButton("video",{title:"Video",label:'<i class="uk-icon-video-camera"></i>'}),t.options.toolbar.push("video"),t.on("action.video",function(t,i){e.openModal(_.find(e.videos,function(e){return e.inRange(i.getCursor())}))}).on("render",function(){e.videos=t.replaceInPreview(/\(video\)(\{.+?})/gi,e.replaceInPreview)}).on("renderLate",function(){for(;e.$children.length;)e.$children[0].$destroy();Vue.nextTick(function(){t.preview.find("video-preview").each(function(){e.$compile(this)})})}),t.debouncedRedraw())},methods:{openModal:function(e){var t=this.$parent.editor,i=t.editor.getCursor();e||(e={replace:function(e){t.editor.replaceRange(e,i)}}),new o({parent:this,data:{video:e}}).$mount().$appendTo("body").$on("select",function(e){e.replace("(video)"+JSON.stringify(e.data))})},replaceInPreview:function(e,t){var i;try{i=JSON.parse(e.matches[1])}catch(o){}return e.data=i||{src:""},'<video-preview index="'+t+'"></video-preview>'}},components:{"video-preview":i(26)}}},function(e,t,i){"use strict";e.exports={props:["type","value","options"],data:function(){return{editor:{},height:500}},compiled:function(){if(this.options&&this.options.height&&(this.height=this.options.height),this.$el.hasAttributes())for(var e=this.$el.attributes,t=e.length-1;t>=0;t--)this.$els.editor.setAttribute(e[t].name,e[t].value),this.$el.removeAttribute(e[t].name);var i=this.$options.components,o="editor-"+this.type,s=this,n=i[o]||i["editor-"+window.$pagekit.editor]||i["editor-textarea"];new n({parent:this}).$on("ready",function(){_.forIn(s.$options.components,function(e){e.options&&e.options.plugin&&new e({parent:s})},this)})},components:{"editor-textarea":{created:function(){this.$emit("ready"),this.$parent.$set("show",!0)}},"editor-html":i(2),"editor-code":i(1),"plugin-link":i(4),"plugin-image":i(3),"plugin-video":i(6),"plugin-url":i(5)}},Vue.component("v-editor",function(t){t(e.exports)})},function(e,t){"use strict";e.exports={data:function(){return{image:{src:"",alt:""}}},ready:function(){this.$refs.modal.open(),this.$on("image-selected",function(e){if(e&&!this.image.alt){var t=e.split("/").slice(-1)[0].replace(/\.(jpeg|jpg|png|svg|gif)$/i,"").replace(/(_|-)/g," ").trim(),i=t.charAt(0).toUpperCase();this.image.alt=i+t.substr(1)}})},methods:{close:function(){this.$destroy(!0)},update:function(){this.$refs.modal.close(),this.$emit("select",this.image)}}}},function(e,t){"use strict";e.exports={props:["index"],computed:{image:function(){return this.$parent.images[this.index]||{}}},methods:{config:function(){this.$parent.openModal(this.image)},remove:function(){this.image.replace("")}}}},function(e,t){"use strict";e.exports={data:function(){return{link:{link:"",txt:"","class":""}}},ready:function(){this.$refs.modal.open()},methods:{close:function(){this.$destroy(!0)},update:function(){this.$refs.modal.close(),this.$emit("select",this.link)}}}},function(e,t){"use strict";e.exports={props:["index"],computed:{link:function(){return this.$parent.links[this.index]||{}}}}},function(e,t){"use strict";e.exports={data:function(){return{video:{data:{src:"",controls:!0}}}},ready:function(){this.$refs.modal.open()},computed:{isYoutube:function(){return Boolean(this.video.data.src.match(/(?:\/\/.*?youtube\.[a-z]+)\/watch\?v=([^&]+)&?(.*)/)||this.video.data.src.match(/youtu\.be\/(.*)/))},isVimeo:function(){return Boolean(this.video.data.src.match(/(\/\/.*?)vimeo\.[a-z]+\/([0-9]+).*?/))}},methods:{close:function(){this.$destroy(!0)},update:function(){this.$refs.modal.close();var e=this;_.forEach(this.video.data,function(t,i){_.isBoolean(t)&&(e.video.data[i]=Number(t)),t||"controls"===i&&e.isYoutube||Vue["delete"](e.video.data,i)}),this.$emit("select",this.video)}}}},function(e,t){"use strict";e.exports={props:["index"],data:function(){return{imageSrc:void 0,videoSrc:void 0}},watch:{"video.data.src":{handler:"update",immediate:!0}},computed:{video:function(){return this.$parent.videos[this.index]||{}}},methods:{config:function(){this.$parent.openModal(this.video)},remove:function(){this.video.replace("")},update:function(e){var t;if(this.$set("imageSrc",void 0),this.$set("videoSrc",void 0),e=e||"",t=e.match(/(?:\/\/.*?youtube\.[a-z]+)\/watch\?v=([^&]+)&?(.*)/)||e.match(/youtu\.be\/(.*)/))this.imageSrc="//img.youtube.com/vi/"+t[1]+"/hqdefault.jpg";else if(e.match(/(\/\/.*?)vimeo\.[a-z]+\/([0-9]+).*?/)){var i=btoa(e);this.$session[i]?this.imageSrc=this.$session[i]:this.$http.get("http://vimeo.com/api/oembed.json",{url:e}).then(function(e){this.imageSrc=this.$session[i]=e.data.thumbnail_url})}else this.videoSrc=this.$url(e)}}}},function(e,t){e.exports="<div><textarea autocomplete=off :style=\"{height: height + 'px'}\" :class=\"{'uk-invisible': !show}\" v-el:editor v-model=value></textarea></div>"},function(e,t){e.exports="<div><v-modal v-ref:modal :closed=close><form class=\"uk-form uk-form-stacked\" @submit.prevent=update><div class=uk-modal-header><h2>{{ 'Add Image' | trans }}</h2></div><div class=uk-form-row><input-image :source.sync=image.src></input-image></div><div class=uk-form-row><label for=form-src class=uk-form-label>{{ 'URL' | trans }}</label><div class=uk-form-controls><input id=form-src class=uk-width-1-1 type=text v-model=image.src lazy></div></div><div class=uk-form-row><label for=form-alt class=uk-form-label>{{ 'Alt' | trans }}</label><div class=uk-form-controls><input id=form-alt class=uk-width-1-1 type=text v-model=image.alt></div></div><div class=\"uk-modal-footer uk-text-right\"><button class=\"uk-button uk-button-link uk-modal-close\" type=button>{{ 'Cancel' | trans }}</button> <button class=\"uk-button uk-button-link\" type=submit>{{ 'Update' | trans }}</button></div></form></v-modal></div>"},function(e,t){e.exports='<div class="uk-panel uk-placeholder uk-placeholder-large uk-text-center uk-visible-hover" v-if=!image.src><img width=60 height=60 :alt="\'Placeholder Image\' | trans" :src="$url(\'app/system/assets/images/placeholder-image.svg\')"><p class="uk-text-muted uk-margin-small-top">{{ \'Add Image\' | trans }}</p><a class=uk-position-cover @click.prevent=config></a><div class="uk-panel-badge pk-panel-badge uk-hidden"><ul class="uk-subnav pk-subnav-icon"><li><a class="pk-icon-delete pk-icon-hover" :title="\'Delete\' | trans" data-uk-tooltip="{delay: 500}" @click.prevent=remove></a></li></ul></div></div><div class="uk-overlay uk-overlay-hover uk-visible-hover" v-else><img :src=$url(image.src) :alt=image.alt><div class="uk-overlay-panel uk-overlay-background uk-overlay-fade"></div><a class=uk-position-cover @click.prevent=config></a><div class="uk-panel-badge pk-panel-badge uk-hidden"><ul class="uk-subnav pk-subnav-icon"><li><a class="pk-icon-delete pk-icon-hover" :title="\'Delete\' | trans" data-uk-tooltip="{delay: 500}" @click.prevent=remove></a></li></ul></div></div>'},function(e,t){e.exports="<div><v-modal v-ref:modal :closed=close><form class=\"uk-form uk-form-stacked\" @submit.prevent=update><div class=uk-modal-header><h2>{{ 'Add Link' | trans }}</h2></div><div class=uk-form-row><label for=form-link-title class=uk-form-label>{{ 'Title' | trans }}</label><div class=uk-form-controls><input id=form-link-title class=uk-width-1-1 type=text v-model=link.txt></div></div><div class=uk-form-row><label for=form-link-url class=uk-form-label>{{ 'Url' | trans }}</label><div class=uk-form-controls><input-link id=form-link-url class=uk-width-1-1 :link.sync=link.link></input-link></div></div><div class=\"uk-modal-footer uk-text-right\"><button class=\"uk-button uk-button-link uk-modal-close\" type=button>{{ 'Cancel' | trans }}</button> <button class=\"uk-button uk-button-link\" type=submit>{{ 'Update' | trans }}</button></div></form></v-modal></div>"},function(e,t){e.exports="<a :class=link.class :href=link.link @click.prevent=$parent.openModal(link)>{{{ link.txt ? link.txt : 'Select Link' | trans }}} <span class=\"pk-icon-link pk-icon-hover\"></span></a>"},function(e,t){e.exports="<div><v-modal v-ref:modal :closed=close><form class=\"uk-form uk-form-stacked\" @submit.prevent=update><div class=uk-modal-header><h2>{{ 'Add Video' | trans }}</h2></div><div class=uk-form-row><input-video :source.sync=video.data.src></input-video></div><div class=uk-form-row><label for=form-src class=uk-form-label>{{ 'URL' | trans }}</label><div class=uk-form-controls><input id=form-src class=uk-width-1-1 type=text :placeholder=\"'URL' | trans\" v-model=video.data.src debounce=500></div></div><div class=uk-form-row><label><input type=checkbox v-model=video.data.autoplay> {{ 'Autoplay' | trans }}</label><label class=uk-margin-small-left v-show=!isVimeo><input type=checkbox v-model=video.data.controls> {{ 'Controls' | trans }}</label><label class=uk-margin-small-left><input type=checkbox v-model=video.data.loop> {{ 'Loop' | trans }}</label><label class=uk-margin-small-left v-show=\"!isVimeo && !isYoutube\"><input type=checkbox v-model=video.data.muted> {{ 'Muted' | trans }}</label></div><div class=uk-form-row v-show=\"!isYoutube && !isVimeo\"><span class=uk-form-label>{{ 'Poster Image' | trans }}</span><div class=uk-form-controls><input-image class=uk-width-1-1 :source.sync=video.data.poster></input-image></div></div><div class=\"uk-modal-footer uk-text-right\"><button class=\"uk-button uk-button-link uk-modal-close\" type=button>{{ 'Cancel' | trans }}</button> <button class=\"uk-button uk-button-link\" type=submit>{{ 'Update' | trans }}</button></div></form></v-modal></div>"},function(e,t){e.exports='<div class="uk-panel uk-placeholder uk-placeholder-large uk-text-center uk-visible-hover" v-if=!video.data.src><img width=60 height=60 :alt="\'Placeholder Video\' | trans" :src="$url(\'app/system/assets/images/placeholder-video.svg\')"><p class="uk-text-muted uk-margin-small-top">{{ \'Add Video\' | trans }}</p><a class=uk-position-cover @click.prevent=config></a><div class="uk-panel-badge pk-panel-badge uk-hidden"><ul class="uk-subnav pk-subnav-icon"><li><a class="pk-icon-delete pk-icon-hover" :title="\'Delete\' | trans" data-uk-tooltip="{delay: 500}" @click.prevent=remove></a></li></ul></div></div><div class="uk-overlay uk-overlay-hover uk-visible-hover" v-else><img class=uk-width-1-1 :src=imageSrc v-if=imageSrc><video class=uk-width-1-1 :src=videoSrc v-if=videoSrc></video><div class="uk-overlay-panel uk-overlay-background uk-overlay-fade"></div><a class=uk-position-cover @click.prevent=config></a><div class="uk-panel-badge pk-panel-badge uk-hidden"><ul class="uk-subnav pk-subnav-icon"><li><a class="pk-icon-delete pk-icon-hover" :title="\'Delete\' | trans" data-uk-tooltip="{delay: 500}" @click.prevent=remove></a></li></ul></div></div>'},function(e,t,i){var o,s;o=i(8),s=i(15),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options:e.exports).template=s)},function(e,t,i){var o,s;o=i(9),s=i(16),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options:e.exports).template=s)},function(e,t,i){var o,s;o=i(10),s=i(17),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options:e.exports).template=s)},function(e,t,i){var o,s;o=i(11),s=i(18),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options:e.exports).template=s)},function(e,t,i){var o,s;o=i(12),s=i(19),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options:e.exports).template=s)},function(e,t,i){var o,s;o=i(13),s=i(20),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options:e.exports).template=s)}]);